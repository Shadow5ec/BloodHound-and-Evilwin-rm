<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Bloodhound</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body>
    <div class='page'><h1 class='title'>Bloodhound</h1><br/><h2>                                                                                            </h2><strong><h2>BLOODHOUND</h2></strong><br />                                                                                                                                                                                       <br /><strong>Introduction  <br /></strong>what is bloodhoud? it <h3>is an application used to visualize active directory environments.</h3>Mainly used on engagements to identitfy different attack paths in Active Directory (AD) This encompasses access control lists (ACLs),Users,Groups,Trust relationships and Unique AD objects.<br /><br />BloodHound was released as a free and open source tool at DEF CON 24.<br /><br />• It <h3>is a single page Javascript web application, built on top of Linkurious, compiled with Electron, with a Neo4jdatabase fed by a PowerShell and c# ingestor.</h3><br />Your probably wondering what ACLs(Access control lists)<h3> </h3>Access Control List<h3> (ACL) is a set of rules that is usually </h3>used to<h3> filter network traffic. ACLs can be configured on network devices with packet filtering capatibilites, such as routers and firewalls.</h3><br /><br /><br /><strong> How does BloodHound work</strong><br /> <br />•  It works by using graph theory to find the shortest path for an attacker to traverse to elevate their privileges within the domain.<br />• Graph theory in mathematics<h3>,is the study of </h3>graphs<h3>, which are mathematical structures used to model pairwise relations between objects.</h3><br /><br />• Bloodhound collects data by using an ingestor called Sharphound. It comes as a regular command-line .exe or powershell script .When the sharphound is executed it collects all the information it can about ActiveDirectory(AD) and its users,computers and groups. It even collects information about active sessions, Ad permissions and lots more by only using the permissions of a regular user.<br /><br />• After which the data comes out as a JSON file that is then fed into the Neo4j database and later visualized by the GUI. <br /><br /><strong>with Bloodhound you can</strong>;<br />gain deep insights into AD Enviroment.<br />know precisely which computers any user has admin rights <br />know which users effectively have admin rights to any computer<br />The most exciting feature of BloodHound is its ability to identify attack paths.<br /><br /><br /><strong>Setting up Bloodhound in Kali Linux</strong><br />Installling bloodhound in kali linux is quite easy;<br /><br /><br /><strong><h2>Install Java</h2></strong><br /><br />Update your sources.list using the following command.<br /><br /><span style="color:#ff0000;">echo &quot;deb http://httpredir.debian.org/debian stretch-backports main&quot; | sudo tee -a /etc/apt/sources.list.d/stretch-backports.list</span><br /><br /><a href=""><img src="images/172-1.png" alt="images/172-1.png" /></a><br /><br />update your system using the following command<br /><br /><span style="color:#ff0000;">sudo apt-get update</span><br /><br /><a href=""><img src="images/172-2.png" alt="images/172-2.png" /></a><br /><br />Neo4j will automatically pull from that repo when it needs to install java as part of its install process.<br /><br /><strong>Install neo4j</strong><br />add noe4j repo to your apt sources using the following commad.<br /><a href=""><img src="images/172-3.png" alt="images/172-3.png" /></a><br /><br />Install apt-transport-https with apt<br /><br /><span style="color:#ff0000;">apt-get install apt-transport-https</span><br /><br /><a href=""><img src="images/172-4.png" alt="images/172-4.png" /></a><br /><br />i already have it installed.<br /><br />now install neo4j community edition using apt<br /><br /><span style="color:#ff0000;">sudo apt-get install neo4j</span><br /><br /><a href=""><img src="images/172-5.png" alt="images/172-5.png" /></a><br /><br />i already have it installed too.<br /><br />run neo4j as a console application using the following commands.<br /><span style="color:#ff0000;">cd /usr/bin &amp;&amp; ./neo4j console</span><br /><br />You can also start it using sytemctl<br /><br /><span style="color:#ff0000;">systemctl start neo4j</span><br /><br />Now open the following link access the web console<br /><br /><h3> </h3><a href="https://localhost:7474/">https://localhost:7474/</a><br /><a href=""><img src="images/172-6.png" alt="images/172-6.png" /></a><br /><br />Authenticate using the following credentials<br /><h3>username neo4j <br />password neo4j</h3><br /><br />Now your promopted to change the password <br /><a href=""><img src="images/172-7.png" alt="images/172-7.png" /></a><br /><br />After that is complete you should now be connected.<br /><a href=""><img src="images/172-8.png" alt="images/172-8.png" /></a><br /><br />Download the latest bloodhound verison <br /><br /><a href=""><img src="images/172-9.png" alt="images/172-9.png" /></a><br />After downloading bloodhound unzip it using the following command.<br /><br /><span style="color:#ff0000;">unzip BloodHound-linux-arm64.zip</span><br />type the following command to start bloodhound.<br /><span style="color:#ff0000;">cd BloodHound-linux-x64<br /> ./BloodHound --no-sandbox</span><br /><a href=""><img src="images/172-10.png" alt="images/172-10.png" /></a><br /><br />login to neo4j using the credentials you setl<br /><span style="color:#ffa500;">Username: neo4j</span><br /><span style="color:#ffa500;">Password: </span><br /><br /><br /><strong><h2>                                                                    Evil win-rm</h2></strong><br />                                                                    <br /><strong>How to setup Evil-winrm(Evil windows remote mangament)</strong><br />winRM <h3>is the Microsoft implementation of WS-Management Protocol</h3>.<h3>A standard SOAP based protocol that allows hardware and operating systems from different vendors to interoperate. Microsoft included it in their Operating Systems in order to make life easier to system administrators.</h3><br /><br /><strong>Installation </strong><br /><br />run the following commads.<br /><br /><span style="color:#ff0000;"> git clone </span><a href="https://github.com/Hackplayers/evil-winrm.git">https://github.com/Hackplayers/evil-winrm.git</a> <span style="color:#ff0000;">&amp;&amp; cd evil-winrm/</span><br /> <a href=""><img src="images/172-11.png" alt="images/172-11.png" /></a><br /> <br /> the syntax to use evilwinrm is quite simple.<br /> <br /><span style="color:#ffa500;"> evil-winrm  -i (target ip address) -u (username) -p (password)</span><br /> <br /> ill be using evilwinrm to collect data on a box i was doing.<br /> <br /><span style="color:#ff0000;"> evil-winrm  -i 10.10.10.179 -u tushikikatomo -p finance1</span><br /> <br /><strong><h3>                                                                       Collecting the data </h3></strong><br /> <br />Gain a connection to the box using evil-winrm<br /><a href=""><img src="images/172-12.png" alt="images/172-12.png" /></a><br /><br />upload the sharphoud to your target machine.<br /><a href=""><img src="images/172-13.png" alt="images/172-13.png" /></a><br />and execute it<br />then download the zip file and load it to bloodhound.<br /><br /><strong>analyzing the zip file</strong><br /><a href=""><img src="images/172-14.png" alt="images/172-14.png" /></a><br /><br />Now you can select the querie you want to run and the domain to execute and you will get the data back on the graph.<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></body></html>